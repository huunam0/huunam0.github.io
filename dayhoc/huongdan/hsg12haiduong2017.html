<html xmlns:m="http://www.w3.org/1998/Math/MathML">
<head>
 <meta charset="utf8"/>
 <title>Giải đề</title>
 <meta name="author" value="Tran Huu Nam"/>
 <link rel="stylesheet" href="../inc/chung.css">
 <link rel="stylesheet" href="../inc/mathjax/mathjax_styles.css">
 <link rel="stylesheet" href="../inc/jquery.min.css">
 <script src="../inc/mathjax/tex-mml-chtml.js" id="MathJax-script" async></script>
 <script src="../inc/jquery.min.js" type="text/javascript"></script>
 <script src="../inc/jquery-ui.min.js" type="text/javascript"></script>
 <script src="../inc/chung.js" type="text/javascript"></script>
 
</head>
<body>


<h2>Đề chọn HSG lớp 12 môn Tin học - Hải Dương 2017</h2>
<h3>Bài 3:</h3>
<p>Ý tưởng: sinh tất cả các xâu con của s. Nếu chưa có thì tăng biến dem.</p>
<p>Kiểm tra xâu con đã có hay chưa: dùng set hoặc map. ĐPT O(logn).</p>
<p>Sinh xâu con: ưu tiên theo độ dài, để trong set chứa ít phần tử: khi chuyển qua độ dài khác thì xoá hết set.</p>
<pre>
<span class="style9">#include &lt;bits/stdc++.h&gt;
</span><span class="style2">//Tran Huu Nam - huunam0@gmail.com - 30/10/2020
</span><span class="style5">using namespace </span><span class="style16">std</span><span class="style10">;
</span><span class="style5">int </span><span class="style11">main</span><span class="style10">()
{
    </span><span class="style16">string </span><span class="style11">s</span><span class="style10">,</span><span class="style11">p</span><span class="style10">;
    </span><span class="style16">cin</span><span class="style10">&gt;&gt;</span><span class="style11">s</span><span class="style10">;
    </span><span class="style16">set</span><span class="style10">&lt;</span><span class="style16">string</span><span class="style10">&gt; </span><span class="style11">xc</span><span class="style10">;
    </span><span class="style5">int </span><span class="style11">dem</span><span class="style10">=</span><span class="style4">0</span><span class="style10">,</span><span class="style11">n</span><span class="style10">=</span><span class="style11">s</span><span class="style10">.</span><span class="style11">length</span><span class="style10">();
    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">int </span><span class="style11">k</span><span class="style10">=</span><span class="style4">1</span><span class="style10">; </span><span class="style11">k</span><span class="style10">&lt;=</span><span class="style11">n</span><span class="style10">; </span><span class="style11">k</span><span class="style10">++)
    {
        </span><span class="style11">xc</span><span class="style10">.</span><span class="style16">clear</span><span class="style10">();
        </span><span class="style5">for </span><span class="style10">(</span><span class="style5">int </span><span class="style11">i</span><span class="style10">=</span><span class="style4">0</span><span class="style10">; </span><span class="style11">i</span><span class="style10">&lt;=</span><span class="style11">n</span><span class="style10">-</span><span class="style11">k</span><span class="style10">; </span><span class="style11">i</span><span class="style10">++)
        {
            </span><span class="style11">p</span><span class="style10">=</span><span class="style11">s</span><span class="style10">.</span><span class="style16">substr</span><span class="style10">(</span><span class="style11">i</span><span class="style10">,</span><span class="style11">k</span><span class="style10">);
            </span><span class="style5">if </span><span class="style10">(</span><span class="style11">xc</span><span class="style10">.</span><span class="style16">count</span><span class="style10">(</span><span class="style11">p</span><span class="style10">)==</span><span class="style4">0</span><span class="style10">) </span><span class="style2">//hoặc xc.find(p)==xc.end()
            </span><span class="style10">{
                </span><span class="style11">dem</span><span class="style10">++;
                </span><span class="style11">xc</span><span class="style10">.</span><span class="style16">insert</span><span class="style10">(</span><span class="style11">p</span><span class="style10">);
            }
        }
    }
    </span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span class="style11">dem</span><span class="style10">;
    </span><span class="style5">return </span><span class="style4">0</span><span class="style10">;
}</span>
</pre>
hoặc insert luôn rồi lấy số lượng sau:
<pre>
;"><span class="style9">#include &lt;bits/stdc++.h&gt;
</span><span class="style5">using namespace </span><span class="style16">std</span><span class="style10">;
</span><span class="style5">int </span><span class="style11">main</span><span class="style10">()
{
    </span><span class="style16">string </span><span class="style11">s</span><span class="style10">,</span><span class="style11">p</span><span class="style10">;
    </span><span class="style16">cin</span><span class="style10">&gt;&gt;</span><span class="style11">s</span><span class="style10">;
    </span><span class="style16">set</span><span class="style10">&lt;</span><span class="style16">string</span><span class="style10">&gt; </span><span class="style11">xc</span><span class="style10">;
    </span><span class="style5">int </span><span class="style11">dem</span><span class="style10">=</span><span class="style4">0</span><span class="style10">,</span><span class="style11">n</span><span class="style10">=</span><span class="style11">s</span><span class="style10">.</span><span class="style11">length</span><span class="style10">();
    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">int </span><span class="style11">k</span><span class="style10">=</span><span class="style4">1</span><span class="style10">; </span><span class="style11">k</span><span class="style10">&lt;=</span><span class="style11">n</span><span class="style10">; </span><span class="style11">k</span><span class="style10">++)
    {
        </span><span class="style11">xc</span><span class="style10">.</span><span class="style16">clear</span><span class="style10">();
        </span><span class="style5">for </span><span class="style10">(</span><span class="style5">int </span><span class="style11">i</span><span class="style10">=</span><span class="style4">0</span><span class="style10">; </span><span class="style11">i</span><span class="style10">&lt;=</span><span class="style11">n</span><span class="style10">-</span><span class="style11">k</span><span class="style10">; </span><span class="style11">i</span><span class="style10">++)
        {
            </span><span class="style11">p</span><span class="style10">=</span><span class="style11">s</span><span class="style10">.</span><span class="style16">substr</span><span class="style10">(</span><span class="style11">i</span><span class="style10">,</span><span class="style11">k</span><span class="style10">);
            </span><span class="style11">xc</span><span class="style10">.</span><span class="style16">insert</span><span class="style10">(</span><span class="style11">p</span><span class="style10">);
        }
        </span><span class="style11">dem</span><span class="style10">+=</span><span class="style11">xc</span><span class="style10">.</span><span class="style16">size</span><span class="style10">();
    }
    </span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span class="style11">dem</span><span class="style10">;
    </span><span class="style5">return </span><span class="style4">0</span><span class="style10">;
}</span></pre>
<h3 class="mucan">Bài 4</h3>
<h4 class="mucan">Thuật toán 1:</h4>
<p class="mucan">Gọi L[i] là độ dài (dài nhất) của cấp số cộng công sai d kết thúc bởi A[i].</p>
<p class="mucan">Đáp án: max(L)</p>
<p class="mucan">Khai báo: int L[100001];</p>
<p class="mucan">Ban đầu: L[i] = 1 với i=1…n;</p>
<p class="mucan">Cách tính L[i]: L[i] = max(L[j], j=1…i-1, A[j]+d=A[i])+1;</p>
<div class="mucan">Code:
<pre>
<span class="style11">memset</span><span class="style10">(</span><span class="style11">L</span><span class="style10">, </span><span class="style4">1</span><span class="style10">, </span><span class="style16">sizeof L</span><span class="style10">);
</span><span class="style5">for </span><span class="style10">(</span><span class="style11">i</span><span class="style10">=</span><span class="style4">1</span><span class="style10">; </span><span class="style11">i</span><span class="style10">&lt;=</span><span class="style11">n</span><span class="style10">; </span><span class="style11">i</span><span class="style10">++)
    </span><span class="style5">for </span><span class="style10">(</span><span class="style11">j</span><span class="style10">=</span><span class="style4">1</span><span class="style10">; </span><span class="style11">j</span><span class="style10">&lt;</span><span class="style11">i</span><span class="style10">; </span><span class="style11">j</span><span class="style10">++)
        </span><span class="style5">if </span><span class="style10">(</span><span class="style11">A</span><span class="style10">[</span><span class="style11">j</span><span class="style10">]=</span><span class="style11">A</span><span class="style10">[</span><span class="style11">i</span><span class="style10">]-</span><span class="style11">d</span><span class="style10">) </span><span class="style11">L</span><span class="style10">[</span><span class="style11">i</span><span class="style10">] = </span><span class="style16">max</span><span class="style10">(</span><span class="style11">L</span><span class="style10">[</span><span class="style11">i</span><span class="style10">], </span><span class="style11">L</span><span class="style10">[</span><span class="style11">j</span><span class="style10">]+</span><span class="style4">1</span><span class="style10">);
    </span></pre>
</div>
<p class="mucan">Độ phức tạp O(n<sup>2</sup>)</p>
<h4 class="mucan">Thuật toán 2:</h4>
<p class="mucan">Gọi L[i] là độ dài (dài nhất) của cấp số cộng công sai d kết thúc bởi số i <em>(không phải chỉ số i)</em>.</p>
<p class="mucan">Ví dụ: n=10, A = {1, 2, 4, 7, 8, 10, 8, 12, 13, 16}, d = 3<br/>
Ban đầu L[i]=0 hết</p>
<ul>
<li class="mucan">Xét số 1: vì 1 ≤ d nên L[1]=1</li>
<li class="mucan">Xét số 2: vì 2 ≤ d nên L[2]=1</li>
<li class="mucan">Xét số 4: vì 4 &gt; d nên L[4]=L[1]+1 = 1+1 = 2</li>
<li class="mucan">Xét số 7:  L[7]=L[4]+1 = 2+1 = 3</li>
<li class="mucan">Xét số 8:  L[8]=L[5]+1 = 0+1 = 1</li>
<li class="mucan">Xét số 10: L[10]=L[7]+1 = 3+1 = 4</li>
<li class="mucan">Xét số 8: L[8]=L[5]+1 = 0+1 = 1</li>
<li class="mucan">Xét số 12: L[12]=L[9]+1 = 0+1 = 1</li>
<li class="mucan">Xét số 13: L[13]=L[10]+1 = 4+1 = 5</li>
<li class="mucan">Xét số 16: L[16]=L[13]+1 = 5+1 = 6</li>
</ul>
<p class="mucan">Đáp án: max(L) = 6</p>
<p class="mucan">Thuật toán ?</p>
<p class="mucan">Ví dụ: n=7, A = {2, 4, 1, 4, 7, 8, 10}, d = 3</p>
<p class="mucan">Hỏi: L[4] = ?</p>
<p class="mucan">Khai báo: int L[1000001];</p>
<p class="mucan">Ban đầu: L[i] = 0 hết;</p>
<p class="mucan">Cách tính L[i]: L[i] = max(L[i], L[i-d]+1);</p>
<div class="mucan">Code:
<pre>
<span class="style11">memset</span><span class="style10">(</span><span class="style11">L</span><span class="style10">, </span><span class="style4">0</span><span class="style10">, </span><span class="style5">sizeof  </span><span class="style11">L</span><span class="style10">);
</span><span class="style5">for </span><span class="style10">(</span><span class="style11">i</span><span class="style10">=</span><span class="style4">1</span><span class="style10">; </span><span class="style11">i</span><span class="style10">&lt;=</span><span class="style11">n</span><span class="style10">; </span><span class="style11">i</span><span class="style10">++)
    </span><span class="style5">if </span><span class="style10">(</span><span class="style11">A</span><span class="style10">[</span><span class="style11">i</span><span class="style10">]&lt;=</span><span class="style11">d</span><span class="style10">) </span><span class="style11">L</span><span class="style10">[</span><span class="style11">i</span><span class="style10">] = </span><span class="style4">1</span><span class="style10">;
    </span><span class="style5">else </span><span class="style11">L</span><span class="style10">[</span><span class="style11">i</span><span class="style10">] = </span><span class="style16">max</span><span class="style10">(</span><span class="style11">L</span><span class="style10">[</span><span class="style11">i</span><span class="style10">], </span><span class="style11">L</span><span class="style10">[</span><span class="style11">A</span><span class="style10">[</span><span class="style11">i</span><span class="style10">]-</span><span class="style11">d</span><span class="style10">]+</span><span class="style4">1</span><span class="style10">);
    </span></pre>
<p>Độ phức tạp O(n)</p>
</div>
</body>
</html>