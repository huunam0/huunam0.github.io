<html xmlns:m="http://www.w3.org/1998/Math/MathML">
<head>
 <meta charset="utf8"/>
 <title>Segment Tree - Cây phân đoạn</title>
 <meta name="author" value="Tran Huu Nam"/>
 <link rel="stylesheet" href="../../inc/chung.css">
 <link rel="stylesheet" href="../../inc/mathjax/mathjax_styles.css">
 <script src="../../inc/mathjax/tex-mml-chtml.js" id="MathJax-script" async></script>
 <script src="../../inc/jquery.min.js" type="text/javascript"></script>
 <script src="../../inc/jquery-ui.min.js" type="text/javascript"></script>
 <link rel="stylesheet" href="../../inc/jquery-ui.min.css">
 <script src="../../inc/chung.js" type="text/javascript"></script>
 
</head>
<body>

<h1>Segment Tree - Cây phân đoạn</h1>
<h2>Truy vấn : tính tổng đoạn p..q</h3>
<h3>1. Ví dụ: Tính tổng đoạn 3..5 trên cây ST của mảng có 7 phần tử 1..7</h3>
<div>
<img class="bamthay" src="img/st-query.png"/>
</div>
<h3>2. Hàm getSum(v, l, r, p, q)</h3>
<div><em>#tính tổng của đoạn p..q trên nhánh cây do nút v quản lí đoạn l..r</em></div>
<ul>
	<li>Nếu đoạn l..r và p..q không giao nhau thì trả về 0</li>
	<li>Nếu đoạn l..r nằm trong đoạn p..q thì trả về H[v]</li>
	<li>gán mid = (l+r) div 2</li>
	<li>Trả về getSum(2v, l, mid, p, q) + getSum(2v+1, mid+1, r, p, q);</li>
</ul>

<h3>3. Độ phức tạp: O(logn).</h3>
<h3>4. Gọi: getSum(1, 1, n, p, q).</h3>
<h3>5. Mã nguồn:</h3>
<pre>
<span class="style5">int </span><span class="style11">getSum</span><span class="style10">(</span><span class="style5">int </span><span class="style11">v</span><span class="style10">, </span><span class="style5">int </span><span class="style11">l</span><span class="style10">, </span><span class="style5">int </span><span class="style11">r</span><span class="style10">, </span><span class="style5">int </span><span class="style11">p</span><span class="style10">, </span><span class="style5">int </span><span class="style11">q</span><span class="style10">)
{
    </span><span class="style5">if </span><span class="style10">(</span><span class="style11">r</span><span class="style10">&lt;</span><span class="style11">p </span><span class="style10">|| </span><span class="style11">l</span><span class="style10">&gt;</span><span class="style11">q</span><span class="style10">) </span><span class="style5">return </span><span class="style4">0</span><span class="style10">;
    </span><span class="style5">if </span><span class="style10">(</span><span class="style11">p</span><span class="style10">&lt;=</span><span class="style11">l </span><span class="style10">&amp;&amp; </span><span class="style11">r</span><span class="style10">&lt;=</span><span class="style11">q</span><span class="style10">) </span><span class="style5">return </span><span class="style11">H</span><span class="style10">[</span><span class="style11">v</span><span class="style10">];
    </span><span class="style5">int </span><span class="style11">mid </span><span class="style10">= (</span><span class="style11">l</span><span class="style10">+</span><span class="style11">r</span><span class="style10">)/</span><span class="style4">2</span><span class="style10">;
    </span><span class="style5">return </span><span class="style11">getSum</span><span class="style10">(</span><span class="style4">2</span><span class="style10">*</span><span class="style11">v</span><span class="style10">,</span><span class="style11">l</span><span class="style10">,</span><span class="style11">mid</span><span class="style10">,</span><span class="style11">p</span><span class="style10">,</span><span class="style11">q</span><span class="style10">) + </span><span class="style11">getSum</span><span class="style10">(</span><span class="style4">2</span><span class="style10">*</span><span class="style11">v</span><span class="style10">+</span><span class="style4">1</span><span class="style10">,</span><span class="style11">mid</span><span class="style10">+</span><span class="style4">1</span><span class="style10">,</span><span class="style11">r</span><span class="style10">,</span><span class="style11">p</span><span class="style10">,</span><span class="style11">q</span><span class="style10">);
}
</span>
</pre>


</body>
</html>