<div class="problem-title">
<h2 style="color:#393630; display: inline-block">Range Updates and Sums</h2>
</div><div class="content-description screen">
<div><p>Cho mảng gồm \(N\) phần tử là các số nguyên. Nhiệm vụ của bạn là xử lý các loại truy vấn sau:</p>
<ul>
<li>\(1\) \(a\) \(b\) \(x\) : Tăng các phần tử từ \(a\) đến \(b\) lên \(x\).</li>
<li>\(2\) \(a\) \(b\) \(x\) : Thay đổi tất cả các phần tử từ \(a\) đến \(b\) thành \(x\).</li>
<li>\(3\) \(a\) \(b\) : Tính tổng các phần tử từ \(a\) đến \(b\).</li>
</ul>
<p><strong>Dữ liệu vào</strong>:</p>
<ul>
<li>Dòng thứ nhất gồm hai số nguyên \(N, Q\) là kích thước mảng và số truy vấn.</li>
<li>Dòng thứ hai gồm \(N\) số nguyên dương \(A_1, A_2, ..., A_N\) ~(1 \leq A_i \leq 10^6).</li>
<li>\(Q\) dòng tiếp theo, mỗi dòng mô tả một truy vấn thuộc một trong ba dạng sau:<ul>
<li>\(1\) \(a\) \(b\) \(x\) \((1 \leq a \leq b \leq N, 1 \leq x \leq 10^6)\).</li>
<li>\(2\) \(a\) \(b\) \(x\) \((1 \leq a \leq b \leq N, 1 \leq x \leq 10^6)\).</li>
<li>\(3\) \(a\) \(b\) \((1 \leq a \leq b \leq N)\).</li>
</ul>
</li>
</ul>
<p><strong>Kết quả</strong>: In ra kết quả cho các truy vấn \(3\).</p>
<p><strong>Ràng buộc</strong>:</p>
<ul>
<li>Subtask 1 \((50\%)\): \(N, Q \leq 2.10^3\).</li>
<li>Subtask 2 \((50\%)\): \(N, Q \leq 2.10^5\).</li>
</ul>
<p><strong>Ví dụ</strong>:</p>
<p><strong>Input</strong>:</p>
<pre><code>6 5
2 3 1 1 5 3
3 3 5
1 2 4 2
3 3 5
2 2 4 5
3 3 5</code></pre>
<p><strong>Output</strong>:</p>
<pre><code>7
11
15</code></pre>
</div>
<hr/>
</div>