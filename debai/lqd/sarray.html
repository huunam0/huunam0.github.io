<div class="problem-title">
<h2 style="color:#393630; display: inline-block">Sub-array</h2>
</div><div class="content-description screen">
<div><p><strong>LƯU Ý: LÀM CẨN THẬN VÌ BÀI NÀY RẤT DỄ RUNTIME ERROR</strong></p>
<p>Cho dãy A có N phần tử. Giá trị của một dãy con liên tiếp trong A là tích ba chỉ số: <code>Giá trị nhỏ nhất của dãy con</code>, <code>Giá trị lớn nhất của dãy con</code> và <code>Độ dài dãy con</code>. Ví dụ, mảng A=[1,2,3,4] có dãy con là [1,2,3] thì giá trị của dãy là 9 (<strong>GTNN</strong> = <strong>1</strong>, <strong>GTLN</strong> = <strong>3</strong>, <strong>Size</strong> = <strong>3</strong>). Nhiệm vụ của bạn là tính tổng tất cả các giá trị của các dãy con đó.</p>
<p><strong>INPUT:</strong></p>
<ul>
<li>Dòng đầu là số nguyên dương N, là số phần tử của mảng A (1\(\leq\)N\(\leq\)\(10^6\))</li>
<li>Dòng thứ hai là các số nguyên \(A_{1}\),\(A_{2}\),...,\(A_{N}\) (các giá trị \(A_{i}\) không vượt qua \(10^9\))</li>
</ul>
<p><strong>OUTPUT:</strong> Một dòng duy nhất sau khi modulo <strong>1e9</strong>.</p>
<h4><strong>Ví dụ</strong></h4>
<p><strong>INPUT</strong></p>
<pre><code>2
1
3</code></pre>
<p><strong>OUTPUT</strong></p>
<pre><code>16</code></pre>
<p><strong>Giới hạn:</strong> 50% số test có N nhỏ hơn 5000</p>
<p><strong>Tag:</strong>  Tournament Tree, Propagation, Stack</p>
</div>
<hr/>
</div>